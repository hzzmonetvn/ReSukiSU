package com.resukisu.resukisu.ui.component

import androidx.compose.runtime.Composable
import com.resukisu.resukisu.Natives

@Composable
inline fun KsuIsValid(
    content: @Composable () -> Unit
) {
    if (ksuIsValid())
        content()
}

private var tested = false
private var ksuIsValid = false

/**
 * Check the manager is valid or not
 *
 * true = ksu valid
 * false = ksu invalid
 *
 * invalid = not is manager
 */
fun ksuIsValid() : Boolean {
    if (tested) return ksuIsValid

    val isManager = Natives.isManager
    val ksuVersion = if (isManager) Natives.version else null
    ksuIsValid = ksuVersion != null
    tested = true

    return ksuIsValid
}